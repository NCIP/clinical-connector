Alter table STUDY_CDES_CTL
ADD (  CREATE_USER    VARCHAR2(30))
/

Alter table STUDY_CDES_CTL
ADD (  CREATE_DATE    DATE)
/

Alter table STUDY_CDES_CTL
ADD (  MODIFY_USER    VARCHAR2(30))
/

Alter table STUDY_CDES_CTL
ADD (  MODIFY_DATE    DATE)
/

CREATE INDEX SCC_INDX ON STUDY_CDES_CTL
(STUDY, REFERENCE_CODE)
LOGGING
NOPARALLEL
/


CREATE OR REPLACE TRIGGER SCC_BU 
 BEFORE UPDATE 
 ON STUDY_CDES_CTL 
 REFERENCING OLD AS OLD NEW AS NEW 
 FOR EACH ROW 
-- PL/SQL Block
BEGIN 
 :new.MODIFY_USER := substr(user,1,30); 
 :new.MODIFY_DATE := sysdate; 
END;
/


CREATE OR REPLACE TRIGGER SCC_BI 
 BEFORE INSERT 
 ON STUDY_CDES_CTL 
 REFERENCING OLD AS OLD NEW AS NEW 
 FOR EACH ROW 
-- PL/SQL Block
BEGIN 
 if :new.CREATE_USER IS NULL THEN 
   :new.CREATE_USER := substr(user,1,30); 
 END IF; 
 :new.CREATE_DATE := sysdate; 
END;
/

