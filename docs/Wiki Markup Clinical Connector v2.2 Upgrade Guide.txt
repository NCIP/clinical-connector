{scrollbar}

h2. {page-info:title}

This chapter explains how to upgrade caBIG{~}^®^~ Clinical Connector from v2.1 to v2.2.

Topics in this chapter include:
{toc:minLevel=3}

h3. Upgrading caBIG Clinical Connector

caBIG{~}^®^~ Clinical Connector v2.2 contains an enhancement to the C3D Utility Mailer that should be upgraded to ensure the existing configuration of the mailer is not lost.

Follow the installation steps found in [Chapter 13|https://wiki.nci.nih.gov/x/9Y9-AQ] of the _caBIG{_}{_}{~}^®^{~}_ _Clinical Trials Suite 2.2 Installation Guide_ until Step 5, "Unzip the Oracle DB Complete Install Zip file". Use the following instructions instead.

h4. Upgrade Clinical Connector Database Objects (Clinical Connector Replacement for Step 5)

# Open the Oracle SQL Plus tool. SQL Plus would have been installed as part of configuring Oracle on the Windows Server.
# Login with the user C3PR using the correct password for C3PR and the Host name as defined in the TNSNAMES.ORA file.
# Once SQL*Plus is started, select *File / Open* and navigate to the directory where the SQL scripts were unzipped to, C:\C3DGS-DBComp.
# Select the file upgrade_DBObjects_for_v22.sql file and then select the *Open* button.
The contents of upgrade_DBObjects_for_v22.sql are brought into SQL*Plus.
# Press return or enter a {{.}} (period) and return to display a normal SQL*Plus prompt.
| (i) | *Note* \\
If you receive an 'Illegal Get Command' error message and the window is returned to the SQL prompt, you may still proceed with the next step to execute the file. |
# Once the SQL prompt reappears, begin object creation for Clinical Connector by typing the following at the SQL prompt:SQL> @upgrade_DBObjects_for_v22.sql
# Once the SQL prompt reappears, review the upgrade_DBobjects_for_v22.lst log file in the C3DGS-DBComp directory for any errors.
# If no errors are seen, begin C3D Utilities database object updates by reconnecting to Oracle using the userid for the C3D Lab Loader owner.
# If you do not know the owner of the C3D Utilities, the following simple query can be used to determine ownership:{code}SQL> select owner from all_objects
where object_name = 'NCI_LABS_MANUAL_LOAD_CTL' and object_type = 'TABLE';{code}
# Record the value of the Owner from the SQL command above for later use.
# Exit the SQL*Plus tool.

h4. Upgrade Auto Loader (Replacement for Step 6 and 7)

# SQL*Plus would have been installed as part of configuring Oracle on the C3D server. Open SQL*Plus.
Login with the C3D Utility owner found in step 10 above using the correct password for this user ID and the Host name as defined in the TNSNAMES.ORA file.
# Once SQL*Plus is started, select *File / Open* and navigate to the directory where the SQL scripts were unzipped to, C:\C3DGS-DBComp
# Select the file Check_C3D_MAIL.sql file and then click *Open*.
The contents of " Upgrade_AutoLoader.sql " will be brought into SQL*Plus.
# Press return or enter a "." (period) and return to display a normal SQL*Plus prompt.
| (i) | *Note* \\
If you receive an 'Illegal Get Command' error message and the window is returned to the SQL prompt, you may still proceed with the next step to execute the file. |
# Once the SQL prompt reappears, begin object checking for C3D by typing the following at the SQL prompt:{code}SQL> @Upgrade_C3D_Mail.sql{code}
# Once the SQL prompt reappears, review the log file "Upgrade_AutoLoader.lst" in the "C3DGS-DBComp" directory for any errors.

Once this step is complete, the upgrade is complete.
{scrollbar}