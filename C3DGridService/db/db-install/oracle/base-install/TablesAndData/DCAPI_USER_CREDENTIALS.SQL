CREATE TABLE DCAPI_USER_CREDENTIALS
(
  UNAME          VARCHAR2(50),
  PWORD          VARCHAR2(400),
  STATUS         VARCHAR2(100),
  C3D_TNS_ENTRY  VARCHAR2(100),
  CREATE_USER    VARCHAR2(30),
  CREATE_DATE    DATE,
  MODIFY_USER    VARCHAR2(30),
  MODIFY_DATE    DATE
)
/

CREATE OR REPLACE TRIGGER DUC_BI 
 BEFORE INSERT 
 ON DCAPI_USER_CREDENTIALS 
 REFERENCING OLD AS OLD NEW AS NEW 
 FOR EACH ROW 
-- PL/SQL Block
BEGIN 
 if :new.CREATE_USER IS NULL THEN 
   :new.CREATE_USER := substr(user,1,30); 
 END IF; 
 :new.CREATE_DATE := sysdate; 
END;
/


CREATE OR REPLACE TRIGGER DUC_BU 
 BEFORE UPDATE 
 ON DCAPI_USER_CREDENTIALS 
 REFERENCING OLD AS OLD NEW AS NEW 
 FOR EACH ROW 
-- PL/SQL Block
BEGIN 
 :new.MODIFY_USER := substr(user,1,30); 
 :new.MODIFY_DATE := sysdate; 
END;
/


INSERT INTO DCAPI_USER_CREDENTIALS ( UNAME, PWORD, STATUS, C3D_TNS_ENTRY ) 
VALUES ( 'C3DDCAPIUSER', 'nB5wkF1GNcs=', 'ACTIVE', 'OCDEV45.NCI.NIH.GOV')
/
